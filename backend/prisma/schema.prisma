generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model admin {
  Id_Utilisateur Int @id
}

model client {
  Id_Utilisateur Int      @id
  estAbonne      Boolean?
  Id_Forfait     Int?
  //Utilisateur    Utilisateur     @relation(fields: [Id_Utilisateur], references: [Id_Utilisateur], onDelete: NoAction, onUpdate: NoAction, map: "Client_ibfk_1")
  //Forfait        Forfait?        @relation(fields: [Id_Forfait], references: [Id_Forfait], onDelete: NoAction, onUpdate: NoAction, map: "Client_ibfk_2")
  empreinter     empreinter[]
  //Espace         Espace[]
  //S_enregistrer  S_enregistrer[]
  s_inscrire     s_inscrire[]

  @@index([Id_Forfait], map: "Id_Forfait")
}

model cours {
  Id_Cours       Int       @id @default(autoincrement())
  nom            String?   @db.VarChar(50)
  interventeur   String?   @db.VarChar(50)
  description    String?   @db.Text
  duree          Decimal?  @db.Decimal(15, 2)
  places         Int?
  horaire        DateTime? @db.DateTime(0)
  dateCours      DateTime? @db.Date
  Id_Salle       Int       
  Id_Utilisateur Int?
  image          String?

  // salle          salle        @relation(fields: [Id_Salle], references: [Id_Salle], onDelete: NoAction, onUpdate: NoAction, map: "Cours_ibfk_1")
  //Admin          Admin?       @relation(fields: [Id_Utilisateur], references: [Id_Utilisateur], onDelete: NoAction, onUpdate: NoAction, map: "Cours_ibfk_2")
  s_inscrire     s_inscrire[]

  @@index([Id_Utilisateur], map: "Id_Utilisateur")
}

model empreinter {
  Id_Equipement  Int
  Id_Utilisateur Int
  dateEmpreint   DateTime @db.DateTime(0)
  duree          Decimal  @db.Decimal(15, 2)

  equipement     equipement @relation(fields: [Id_Equipement], references: [Id_Equipement], onDelete: NoAction, onUpdate: NoAction, map: "Empreinter_ibfk_1")
  client         client     @relation(fields: [Id_Utilisateur], references: [Id_Utilisateur], onDelete: NoAction, onUpdate: NoAction, map: "Empreinter_ibfk_2")

  @@id([Id_Utilisateur, Id_Equipement])
  @@index([Id_Equipement], map: "Id_Equipement")
  @@index([Id_Utilisateur], map: "Id_Utilisateur")
}

model equipement {
  Id_Equipement Int      @id @default(autoincrement())
  nom           String
  type          String
  createdAt     DateTime @default(now())
  image         String?
  quantite      Int
  empreinter     empreinter[]
}

model espace {
  Id_Espace        Int      @id @default(autoincrement())
  nom              String?  @db.VarChar(50)
  places           Int?
  duree            Decimal? @db.Decimal(15, 2)
  prix             Decimal? @db.Decimal(15, 2)
  typeEvenement    String?  @db.VarChar(50)
  date             DateTime? @db.Date
  Id_Utilisateur   Int?

  @@index([Id_Utilisateur], map: "Id_Utilisateur")
}

model evenement {
  Id_Evenement       Int       @id @default(autoincrement())
  nom                String?   @db.VarChar(50)
  description        String?   @db.Text
  places             Int?
  duree              Decimal?  @db.Decimal(15, 2)
  dateHeureEvenement DateTime? @db.Date
  Id_Salle           Int       @unique(map: "Id_Salle")
  Id_Utilisateur     Int?
  image              String?

  @@index([Id_Utilisateur], map: "Id_Utilisateur")
}

model forfait {
  Id_Forfait  Int      @id @default(autoincrement())
  nom         String?  @db.VarChar(50)
  prix        Decimal? @db.Decimal(15, 2)
  description String?  @db.Text
}

model paiement {
  Id_Paiement Int       @id @default(autoincrement())
  dateAchat   DateTime? @db.DateTime(0)
  montant     Decimal?  @db.Decimal(15, 2)
  Id_Forfait  Int       @unique(map: "Id_Forfait")
}

model s_enregistrer {
  Id_Evenement   Int
  Id_Utilisateur Int

  @@id(name: "s_enregistrer_id",[Id_Evenement, Id_Utilisateur])
  @@index([Id_Utilisateur], map: "Id_Utilisateur")
}

model s_inscrire {
  Id_Cours       Int
  Id_Utilisateur Int
  cours          cours  @relation(fields: [Id_Cours], references: [Id_Cours], onDelete: NoAction, onUpdate: NoAction, map: "S_inscrire_ibfk_1")
  client         client @relation(fields: [Id_Utilisateur], references: [Id_Utilisateur], onDelete: NoAction, onUpdate: NoAction, map: "S_inscrire_ibfk_2")
  @@id([Id_Cours, Id_Utilisateur])
  @@index([Id_Utilisateur], map: "Id_Utilisateur")
}

model salle {
  Id_Salle Int      @id @default(autoincrement())
  nom      String?  @db.VarChar(50)
  estLibre Boolean?
  type     String?  @db.VarChar(50)
  capacite Int?
}

model utilisateur {
  Id_Utilisateur  Int      @id @default(autoincrement())
  nom             String?  @db.VarChar(50)
  estAdmin        Boolean?
  adresseMail     String?  @unique(map: "adresseMail") @db.VarChar(50)
  motDePasse      String?  @db.VarChar(256)
  numeroTelephone String?  @db.VarChar(50)
  image           String?
}

model contact {
  Id_Contact  Int       @id @default(autoincrement())
  nom         String?   @db.VarChar(50)
  mail        String?   @db.VarChar(50)
  message     String?   @db.Text
  createDate  DateTime? @db.DateTime(0)
} 